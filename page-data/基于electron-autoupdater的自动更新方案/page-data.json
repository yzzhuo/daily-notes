{"componentChunkName":"component---node-modules-gatsby-theme-blog-src-templates-post-js","path":"/基于electron-autoupdater的自动更新方案","webpackCompilationHash":"a33831b61060aa09b70d","result":{"data":{"post":{"id":"56921c25-9b31-5e70-887b-5ff60ecadfc9","title":"基于electron-autoupdater的客户端自动更新方案","date":"March 14, 2018","excerpt":"此教程是基于electron-autoupdater的自动更新方案。研究了一下electron文档原生的autoUpdater模块和elecrtron-builder配套的autoUpdater，最终选择后者是因为实现起来简单太多，而且在macOS和win…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"基于electron-autoupdater的客户端自动更新方案\",\n  \"date\": \"2018-03-14T22:45:13.000Z\",\n  \"tags\": null\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u6B64\\u6559\\u7A0B\\u662F\\u57FA\\u4E8Eelectron-autoupdater\\u7684\\u81EA\\u52A8\\u66F4\\u65B0\\u65B9\\u6848\\u3002\\u7814\\u7A76\\u4E86\\u4E00\\u4E0Belectron\\u6587\\u6863\\u539F\\u751F\\u7684autoUpdater\\u6A21\\u5757\\u548Celecrtron-builder\\u914D\\u5957\\u7684autoUpdater\\uFF0C\\u6700\\u7EC8\\u9009\\u62E9\\u540E\\u8005\\u662F\\u56E0\\u4E3A\\u5B9E\\u73B0\\u8D77\\u6765\\u7B80\\u5355\\u592A\\u591A\\uFF0C\\u800C\\u4E14\\u5728macOS\\u548Cwin\\u7684\\u5B9E\\u73B0\\u4E5F\\u662F\\u4E00\\u81F4\\u7684\\u3002\"), mdx(\"h4\", {\n    \"id\": \"目标效果\"\n  }, \"\\u76EE\\u6807\\u6548\\u679C\"), mdx(\"p\", null, \"\\u5E94\\u7528\\u6253\\u5F00\\u7684\\u65F6\\u5019\\u81EA\\u52A8\\u68C0\\u6D4B\\u5F53\\u524D\\u662F\\u5426\\u662F\\u6700\\u65B0\\u7248\\u672C\\uFF0C\\u5982\\u679C\\u4E0D\\u662F\\uFF0C\\u63D0\\u793A\\u7528\\u6237\\u662F\\u5426\\u66F4\\u65B0\\uFF0C\\u7528\\u6237\\u786E\\u8BA4\\u66F4\\u65B0\\u540E\\uFF0C\\u4F1A\\u81EA\\u52A8\\u53BB\\u4E0B\\u8F7D\\u6700\\u65B0\\u7684\\u5B89\\u88C5\\u5305\\uFF0C\\u4E0B\\u8F7D\\u5B8C\\u6210\\u540E\\u63D0\\u793A\\u7528\\u6237\\u662F\\u5426\\u91CD\\u65B0\\u542F\\u52A8\\u6253\\u5F00\\u6700\\u65B0\\u7248\\u672C\\u7684\\u5BA2\\u6237\\u7AEF\\u3002\"), mdx(\"h4\", {\n    \"id\": \"实现步骤\"\n  }, \"\\u5B9E\\u73B0\\u6B65\\u9AA4\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5728\\u9879\\u76EE\\u4E2D\\u5B89\\u88C5electron-updater\\u8FD9\\u4E2A\\u4F9D\\u8D56\\u3002\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5728main.js\\u4E2D\\u5F15\\u5165\\u4E0B\\u9762\\u4EE3\\u7801\\uFF1A\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"const {autoUpdater} = require(\\\"electron-updater\\\");\\nconst {app, dialog } = require('electron');\\n\\n// \\u68C0\\u6D4B\\u5F53\\u524D\\u662F\\u5426\\u662F\\u6700\\u65B0\\u7248\\u672C\\nautoUpdater.on('update-available', (ev, info) => {\\n  dialog.showMessageBox({\\n    type: 'info',\\n    title: 'Found Updates',\\n    message: 'Found updates, do you want update now?',\\n    buttons: ['Sure', 'No']\\n  }, (buttonIndex) => {\\n    if (buttonIndex === 0) {\\n      // \\u4E0B\\u8F7D\\u6700\\u65B0\\u7684\\u5B89\\u88C5\\u5305\\n      autoUpdater.downloadUpdate()\\n    }\\n  });\\n})\\n// \\u81EA\\u52A8\\u66F4\\u65B0\\u5F02\\u5E38\\u5904\\u7406\\nautoUpdater.on('error', (ev, err) => {\\n  console.log('Error in auto-updater.');\\n})\\n//\\u5F00\\u59CB\\u4E0B\\u8F7D\\u5B89\\u88C5\\u5305\\u68C0\\u6D4B\\nautoUpdater.on('download-progress', (ev, progressObj) => {\\n  console.log('Download progress...');\\n})\\n// \\u5B89\\u88C5\\u5B8C\\u6210\\u540E\\nautoUpdater.on('update-downloaded', (ev, info) => {\\n  dialog.showMessageBox({\\n    title: 'Install Updates',\\n    message: 'Updates downloaded, application will be quit for update...'\\n  }, () => {\\n    setImmediate(() => autoUpdater.quitAndInstall())\\n  })\\n});\\napp.on('ready', function()  {\\n  // ....\\n  // \\u542F\\u52A8\\u81EA\\u52A8\\u68C0\\u6D4B\\u7248\\u672C\\n  autoUpdater.checkForUpdates();\\n});\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u914D\\u7F6Epackage.json\\uFF0C\\u5728build\\u5B57\\u6BB5\\u91CC\\u9762\\u589E\\u52A0publish\\u5B57\\u6BB5\\uFF0C\\u5176\\u4E2D\\u7684url\\u662F\\u5B89\\u88C5\\u5305\\u548C\\u8BB0\\u5F55\\u4E86\\u5F53\\u524D\\u6700\\u65B0\\u7248\\u672C\\u7684json/yml\\u6587\\u4EF6\\u3002\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"\\\"build\\\": {\\n  ...\\n    \\\"publish\\\": [\\n      {\\n        \\\"provider\\\": \\\"generic\\\",\\n        \\\"url\\\": \\\"https://localhost:8080/releases\\\"\\n      }\\n    ],\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u7528electron-builder\\u6253\\u5305\\u51FA\\u5B89\\u88C5\\u5305\\u7B49\\u6587\\u4EF6\\u5230dist\\u76EE\\u5F55\\uFF0Cdist\\u76EE\\u5F55\\u5927\\u81F4\\u5305\\u62EC\\u4E0B\\u5217\\u6587\\u4EF6\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"--dist\\n client-1.2.1.dmg\\n client-1.2.1-mac.zip\\n lastest-mac.json\\n lastest-mac.yml\\n client-1.2.1.exe\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5C06\\u4E0A\\u9762\\u5C55\\u793A\\u7684dist\\u76EE\\u5F55\\u4E0B\\u7684\\u8D44\\u6E90\\u653E\\u5728\\u5728\\u9759\\u6001\\u670D\\u52A1\\u5668\\u4E0A\\uFF0C\\u4F7F\\u5F97\\u53EF\\u4EE5\\u901A\\u8FC7\\u7B2C\\u4E09\\u6B65\\u8BBE\\u7F6E\\u7684seedUrl\\u80FD\\u591F\\u8BBF\\u95EE\\u5230dist\\u91CC\\u9762\\u7684\\u6587\\u4EF6\\u3002\"))), mdx(\"h4\", {\n    \"id\": \"测试步骤\"\n  }, \"\\u6D4B\\u8BD5\\u6B65\\u9AA4\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5148\\u6253\\u5305\\u4E00\\u4E2A\\u5B89\\u88C5\\u5305\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5347\\u7EA7\\u7248\\u672C\\u53F7\\uFF0C\\u518D\\u6253\\u4E00\\u4E2A\\u5B89\\u88C5\\u5305\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u66F4\\u65B0\\u9759\\u6001\\u8D44\\u6E90\\u670D\\u52A1\\u5668\\u4E0A\\u7684\\u6587\\u4EF6\\uFF0C\\u628A\\u7B2C\\u4E8C\\u90E8\\u6253\\u5305\\u51FA\\u6765\\u7684\\u4E1C\\u897F\\u4E0A\\u4F20\\u5230\\u670D\\u52A1\\u5668\\u4E0A\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5B89\\u88C5\\u7B2C\\u4E00\\u6B65\\u7684\\u5B89\\u88C5\\u5305\\uFF0C\\u6253\\u5F00\\u663E\\u793A\\u6709\\u7248\\u672C\\u66F4\\u65B0\\uFF0C\\u80FD\\u591F\\u4E0B\\u8F7D\\u6700\\u65B0\\u5B89\\u88C5\\u5305\\u548C\\u5B89\\u88C5\\u91CD\\u542F\\u5C31\\u5927\\u529F\\u544A\\u6210\\u4E86\\uFF5E\")), mdx(\"h4\", {\n    \"id\": \"其他注意要点\"\n  }, \"\\u5176\\u4ED6\\u6CE8\\u610F\\u8981\\u70B9\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u82E5\\u662F\\u76F4\\u63A5\\u7528\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"electron\"), \"\\u547D\\u4EE4\\u542F\\u52A8\\u5BA2\\u6237\\u7AEF\\uFF0C\\u4F1A\\u62A5autoupdater\\u6839\\u76EE\\u5F55\\u7F3A\\u5C11dev-app-update.yml\\u7684\\u9519\\uFF0C\\u9700\\u8981\\u81EA\\u5DF1\\u624B\\u52A8\\u5728\\u6839\\u76EE\\u5F55\\u52A0\\u4E0A\\uFF1A\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"version: 1.X.X\\nprovider: generic\\nurl: seedURL\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u76F4\\u63A5\\u7528electron\\u542F\\u52A8\\u5BA2\\u6237\\u7AEF\\u6D4B\\u8BD5\\u66F4\\u65B0\\u7684\\u8BDD\\uFF0Cmac\\u4F1A\\u5305codesiging\\u7684\\u9519\\u8BEF\\uFF0C\\u5177\\u4F53\\u53EF\\u4EE5\\u770B\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/electron/electron/issues/7476%E3%80%82%EF%BC%88%E5%9B%A0%E4%B8%BA%E6%88%91%E6%87%92%EF%BC%8C%E6%B2%A1%E6%9C%89%E5%8E%BB%E5%BC%84%EF%BC%8C%E7%9B%B4%E6%8E%A5%E6%89%93%E5%8C%85%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95%E4%B9%9F%E6%98%AF%E5%A6%A5%E5%A6%A5%E7%9A%84%EF%BC%89\"\n  }), \"https://github.com/electron/electron/issues/7476\\u3002\\uFF08\\u56E0\\u4E3A\\u6211\\u61D2\\uFF0C\\u6CA1\\u6709\\u53BB\\u5F04\\uFF0C\\u76F4\\u63A5\\u6253\\u5305\\u8FDB\\u884C\\u6D4B\\u8BD5\\u4E5F\\u662F\\u59A5\\u59A5\\u7684\\uFF09\")))), mdx(\"p\", null, \"\\u66F4\\u591A\\u4FE1\\u606F\\u8BF7\\u770B\\u6587\\u6863\\uFF1A\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.electron.build/auto-update\"\n  }), \"https://www.electron.build/auto-update\")));\n}\n;\nMDXContent.isMDXComponent = true;"},"site":{"siteMetadata":{"title":"June's blog"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"56921c25-9b31-5e70-887b-5ff60ecadfc9","excerpt":"此教程是基于electron-autoupdater的自动更新方案。研究了一下electron文档原生的autoUpdater模块和elecrtron-builder配套的autoUpdater，最终选择后者是因为实现起来简单太多，而且在macOS和win…","slug":"/基于electron-autoupdater的自动更新方案","title":"基于electron-autoupdater的客户端自动更新方案","date":"March 14, 2018","siteTitle":"June's blog","socialLinks":[{"name":"twitter","url":"https://twitter.com/yzzhuo"},{"name":"github","url":"https://github.com/yzzhuo"}],"previous":{"node":{"id":"9af695a3-1dc5-5b22-b081-2f52b1e40551","excerpt":"…","slug":"/策略模式","title":"javascript设计模式-策略模式","date":"July 10, 2017"}},"next":{"node":{"id":"09d5e100-8dc0-5e8e-9a4b-7ec9efd63fba","excerpt":"In some countries like the U.K and U.S, they always like to use a comma to separete groups of thousands. And I encounter a requirement of…","slug":"/Numer-formatting-in-javascript","title":"Numer formatting in javascript","date":"July 25, 2019"}}}}}